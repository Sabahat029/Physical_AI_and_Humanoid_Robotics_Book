import { isEmpty, merge } from 'lodash-es';
export function sortedTokensToFiles(tokens, directoryPath) {
    const formattedDirectoryPath = directoryPath.endsWith('/') || directoryPath === '' ? directoryPath : `${directoryPath}/`;
    return Object.entries(tokens).map(([path, value]) => {
        return {
            path: `${formattedDirectoryPath}${path}.json`,
            content: {
                type: 'text',
                text: JSON.stringify(path
                    .split('/')
                    .reverse()
                    .reduce((acc, key) => isEmpty(acc)
                    ? {
                        [key]: Object.entries(value).reduce((acc, [path, value]) => merge(acc, path
                            .split('.')
                            .reverse()
                            .reduce((acc, key) => (isEmpty(acc) ? { [key]: value } : { [key]: acc }), {})), {}),
                    }
                    : { [key]: acc }, {})),
            },
        };
    });
}
//# sourceMappingURL=sortedTokensToFiles.js.map