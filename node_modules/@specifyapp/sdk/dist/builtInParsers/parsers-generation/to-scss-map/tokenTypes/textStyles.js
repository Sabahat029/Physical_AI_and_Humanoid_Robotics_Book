import { textStyleValueToCss } from '../../../../converters/css/tokenTypes/textStyle.js';
import { dataOfToken, makeRenderer } from '../../../shared/to-scss-mixin-text-style/template.js';
import { makeMixin } from '../makeMixin.js';
const VAR_NAME = 'text-style';
export function textStylesToScssMap(textStyles, template) {
    const renderVariable = makeRenderer(template);
    let map = textStyles.reduce((acc, textStyle) => {
        const toAppend = textStyle.modes.reduce((acc, mode) => {
            const jsonValue = textStyle.getJSONValue({
                resolveAliases: true,
                allowUnresolvable: false,
                targetMode: mode,
            });
            const converted = textStyleValueToCss(jsonValue);
            const varName = renderVariable(dataOfToken(textStyle, mode));
            const keys = Object.keys(converted);
            return (acc +
                `  ${varName}: (\n${Object.entries(converted).reduce((acc, [key, value], i) => {
                    if (value === 'none' ||
                        (typeof value === 'number' && value === 0) ||
                        (typeof value === 'string' && value.match(/^0[^0-9]*$/))) {
                        if (keys.length === i + 1) {
                            // Removing last \n
                            return acc.substring(0, acc.length - 1);
                        }
                        return acc;
                    }
                    return acc + `    ${key}: ${value},${keys.length === i + 1 ? '' : '\n'}`;
                }, '')}\n  ),\n`);
        }, '');
        return acc + toAppend;
    }, `$${VAR_NAME}: (\n`);
    map += ');\n';
    return map + makeMixin(VAR_NAME);
}
//# sourceMappingURL=textStyles.js.map