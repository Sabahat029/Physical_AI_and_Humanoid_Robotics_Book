import { promises as fs } from 'node:fs';
import { generateEmptyFile } from './fileSystem.js';

export async function replaceFile(
  relativeFilePath: string,
  content: string | object | Buffer,
): Promise<void> {
  const absoluteFilePath = await generateEmptyFile(relativeFilePath);

  const finalContent =
    typeof content === 'string' || Buffer.isBuffer(content)
      ? content
      : JSON.stringify(content, null, 2);
  await fs.writeFile(absoluteFilePath, finalContent, {
    encoding: 'utf8',
  });
}
