import { HttpResponseBody } from '../internals/httpResponseBody.js';
import { createPublicHttpRouteDefinition } from '../internals/createPublicHttpRouteDefinition.js';
import { SpecifyCurrentUser, specifyCurrentUserSchema } from '../definitions/index.js';

export function makeGetMeRoute() {
  return '/v2/me';
}

export const getMeRouteDefinition = createPublicHttpRouteDefinition({
  authenticationStrategy: 'personalAccessToken',
  httpMethod: 'GET',
  makeRoute: makeGetMeRoute,
  responsePayloadSchema: specifyCurrentUserSchema,
});

export type GetMeResponseBody<Status extends 'success' | 'error' = 'success' | 'error'> = Extract<
  HttpResponseBody<SpecifyCurrentUser>,
  { status: Status }
>;
