import { z } from 'zod';

import { specifyRepositorySchema } from '../definitions/repository.js';
import { createPublicHttpRouteDefinition } from '../internals/createPublicHttpRouteDefinition.js';

export function makeGetRepositoryDetailsByOwnerAndNameRoute(options?: {
  owner: string;
  name: string;
}) {
  const { owner, name } = options ?? {};
  return `/v2/${owner ?? '{owner}'}/repository/${name ?? '{name}'}/details` as const;
}

const getRepositoryDetailsByOwnerAndNameParamsSchema = z
  .object({
    owner: z.string(),
    name: z.string(),
  })
  .strict();
export const getRepositoryDetailsByOwnerAndNameRouteDefinition = createPublicHttpRouteDefinition({
  authenticationStrategy: 'personalAccessToken',
  httpMethod: 'GET',
  makeRoute: makeGetRepositoryDetailsByOwnerAndNameRoute,
  responsePayloadSchema: specifyRepositorySchema,
  paramsSchema: getRepositoryDetailsByOwnerAndNameParamsSchema,
});
