import { ZodError } from 'zod';
import { HttpResponseErrorMessage } from '../internals/httpResponseMessage.js';
import { specifyErrors } from '../../errors/index.js';

export function makeHttpResponseErrorMessagesFromZodError(
  zodError: ZodError,
): Array<HttpResponseErrorMessage> {
  return zodError.issues.map(issue => {
    return {
      type: 'error',
      errorKey: specifyErrors.INVALID_BODY_PARAMS.errorKey,
      content: issue.message,
      location: {
        type: 'zod',
        path: issue.path,
      },
    };
  });
}
