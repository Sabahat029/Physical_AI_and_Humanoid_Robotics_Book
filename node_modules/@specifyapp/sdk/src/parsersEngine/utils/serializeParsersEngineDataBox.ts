import {
  ParsersEngineDataBox,
  SerializedParsersEngineDataBox,
} from '../definitions/parsersEngineDataBox.js';

/**
 * Serialize a data box to a serialized data box
 * @param dataBox
 */
export function serializeParsersEngineDataBox(
  dataBox: ParsersEngineDataBox,
): SerializedParsersEngineDataBox {
  if (dataBox.type === 'SDTF Engine') {
    const { tokenTree, metadata } = dataBox.engine.exportEngineState();
    return {
      type: 'SDTF',
      graph: tokenTree,
      metadata,
    };
  }
  return dataBox;
}
