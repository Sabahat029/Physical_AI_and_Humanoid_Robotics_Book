import { SpecifyTransitionValue } from '@specifyapp/specify-design-token-format';
import { durationToSwift } from './duration.js';
import { MultipleConversionOutput } from '../convertTokens.js';

export function transitionToSwift(
  transition: SpecifyTransitionValue,
  variableName: string,
): MultipleConversionOutput {
  if (Array.isArray(transition.timingFunction)) {
    return [
      {
        variableName,
        value: `Animation.timingCurve(${transition.timingFunction.join(
          ', ',
        )}, duration: ${durationToSwift(transition.duration)}).delay(${durationToSwift(
          transition.delay,
        )})`,
        type: 'transition',
      },
    ];
  }

  return [
    {
      variableName: `${variableName}Delay`,
      value: durationToSwift(transition.delay),
      type: 'duration',
    },
    {
      variableName: `${variableName}Duration`,
      value: durationToSwift(transition.duration),
      type: 'duration',
    },
  ];
}
