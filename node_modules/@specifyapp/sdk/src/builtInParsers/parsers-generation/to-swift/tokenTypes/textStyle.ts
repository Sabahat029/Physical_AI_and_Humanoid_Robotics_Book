import { SpecifyTextStyleValue } from '@specifyapp/specify-design-token-format';
import { colorToSwift } from './color.js';
import { MultipleConversionOutput } from '../convertTokens.js';
import { textAlignmentHorizontalToSwift } from './textAlignHorizontal.js';
import { dimensionToSwift } from './dimension.js';

export function textStyleToSwift(
  textStyle: SpecifyTextStyleValue,
  variableName: string,
): MultipleConversionOutput {
  const values: MultipleConversionOutput = [
    {
      variableName,
      value: `Font.custom("${textStyle.font.postScriptName}", size: ${dimensionToSwift(
        textStyle.fontSize,
      )})`,
      type: 'font',
    },
  ];

  if (!!textStyle.color) {
    const color = colorToSwift(textStyle.color);

    if (!!color) {
      values.push({ variableName, value: color, type: 'color' });
    }
  }

  if (!!textStyle.lineHeight)
    values.push({
      variableName: `${variableName}LineHeight`,
      value: dimensionToSwift(textStyle.lineHeight),
      type: 'dimension',
    });

  if (!!textStyle.letterSpacing)
    values.push({
      variableName: `${variableName}LetterSpacing`,
      value: dimensionToSwift(textStyle.letterSpacing),
      type: 'dimension',
    });

  if (!!textStyle.textAlignHorizontal) {
    const align = textAlignmentHorizontalToSwift(textStyle.textAlignHorizontal);

    if (!!align) {
      values.push({
        variableName,
        value: align,
        type: 'textAlignHorizontal',
      });
    }
  }

  return values;
}
