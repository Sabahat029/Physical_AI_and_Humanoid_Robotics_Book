import { SpecifyColorValue } from '@specifyapp/specify-design-token-format';
//@ts-ignore
import tinycolor from 'tinycolor2';

function round(value: number) {
  return `${value === 1 || value === 0 ? value.toFixed(1) : value.toFixed(5)}f`;
}

export function colorToKotlin(color: SpecifyColorValue) {
  const alpha = color.alpha;

  switch (color.model) {
    case 'hex': {
      const hex = tinycolor(color.hex);
      hex.setAlpha(alpha);
      const hex8 = hex.toHex8();

      return `Color(0x${hex8.substring(6).toUpperCase()}${hex8.substring(0, 6).toUpperCase()})`;
    }
    case 'rgb': {
      return `Color(${round(color.red / 255)}, ${round(color.green / 255)}, ${round(
        color.blue / 255,
      )}, ${alpha}f)`;
    }
    default:
      return undefined;
  }
}
