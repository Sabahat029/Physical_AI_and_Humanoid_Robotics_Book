import { z } from 'zod';

import { createBuiltInParserDefinition } from '../../internals/createBuiltInParserDefinition.js';
import { queryParserSchema } from '../../shared/definition.js';

export const registerViewParserName = 'register-view';

export const registerViewParserOptionsSchema = z
  .object(
    {
      name: z.string(),
      query: queryParserSchema,
    },
    {
      invalid_type_error: 'The registerView parser options must be an object.',
    },
  )
  .strict();
export const registerViewParserDefinition = createBuiltInParserDefinition({
  name: registerViewParserName,
  kind: 'utility',
  hasOptionalOptions: false,
  optionsSchema: registerViewParserOptionsSchema,
  hasOptionalOutput: true,
  outputTypes: undefined,
  inTypes: ['SDTF Engine'],
  outType: 'SDTF Engine',
});

export type RegisterViewParserDefinition = typeof registerViewParserDefinition;
export type RegisterViewParserOptions = z.infer<
  typeof registerViewParserDefinition['optionsSchema']
>;
