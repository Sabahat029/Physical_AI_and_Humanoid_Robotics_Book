import { SpecifyBorderValue } from '@specifyapp/specify-design-token-format';
import { NumberRounder } from '../makeNumberRounder.js';
import { KeysPerTokenTypeSelector } from '../definition.js';

export function getBorderUpdateValue(
  border: SpecifyBorderValue,
  roundNumber: NumberRounder,
  applyToKeys: KeysPerTokenTypeSelector['border'],
) {
  if (!applyToKeys || applyToKeys.includes('width')) {
    border.width.value = roundNumber(border.width.value);
  }

  if (
    border.rectangleCornerRadii &&
    (!applyToKeys || applyToKeys.includes('rectangleCornerRadii'))
  ) {
    border.rectangleCornerRadii = border.rectangleCornerRadii.map(v => ({
      unit: v.unit,
      value: roundNumber(v.value),
    })) as any;
  }

  return border;
}
