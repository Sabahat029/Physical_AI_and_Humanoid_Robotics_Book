import { SpecifyTextStyleValue } from '@specifyapp/specify-design-token-format';
import { NumberRounder } from '../makeNumberRounder.js';
import { KeysPerTokenTypeSelector } from '../definition.js';

export function getTextStyleUpdateValue(
  textStyle: SpecifyTextStyleValue,
  roundNumber: NumberRounder,
  applyToKeys: KeysPerTokenTypeSelector['textStyle'],
) {
  if (!applyToKeys || applyToKeys.includes('fontSize')) {
    textStyle.fontSize.value = roundNumber(textStyle.fontSize.value);
  }

  if (textStyle.lineHeight && (!applyToKeys || applyToKeys.includes('lineHeight'))) {
    textStyle.lineHeight.value = roundNumber(textStyle.lineHeight.value);
  }

  if (textStyle.paragraphSpacing && (!applyToKeys || applyToKeys.includes('paragraphSpacing'))) {
    textStyle.paragraphSpacing.value = roundNumber(textStyle.paragraphSpacing.value);
  }

  if (textStyle.textIndent && (!applyToKeys || applyToKeys.includes('textIndent'))) {
    textStyle.textIndent.value = roundNumber(textStyle.textIndent.value);
  }

  if (textStyle.letterSpacing && (!applyToKeys || applyToKeys.includes('letterSpacing'))) {
    textStyle.letterSpacing.value = roundNumber(textStyle.letterSpacing.value);
  }

  return textStyle;
}
