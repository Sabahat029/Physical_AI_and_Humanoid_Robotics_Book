import { SpecifyShadowValue } from '@specifyapp/specify-design-token-format';
import { NumberRounder } from '../makeNumberRounder.js';
import { KeysPerTokenTypeSelector } from '../definition.js';

export function getShadowUpdateValue(
  shadow: SpecifyShadowValue,
  roundNumber: NumberRounder,
  applyToKeys: KeysPerTokenTypeSelector['shadow'],
) {
  if (!applyToKeys || applyToKeys.includes('offsetX')) {
    shadow.offsetX.value = roundNumber(shadow.offsetX.value);
  }

  if (!applyToKeys || applyToKeys.includes('offsetY')) {
    shadow.offsetY.value = roundNumber(shadow.offsetY.value);
  }

  if (!applyToKeys || applyToKeys.includes('blurRadius')) {
    shadow.blurRadius.value = roundNumber(shadow.blurRadius.value);
  }

  if (!applyToKeys || applyToKeys.includes('spreadRadius')) {
    shadow.spreadRadius.value = roundNumber(shadow.spreadRadius.value);
  }

  return shadow;
}
