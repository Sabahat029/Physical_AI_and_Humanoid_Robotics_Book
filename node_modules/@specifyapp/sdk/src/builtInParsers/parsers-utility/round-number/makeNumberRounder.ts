import { CleanOptions } from '../../utils/types.js';
import { RoundNumberParserOptions } from './definition.js';

export type NumberRounder = (number: number) => number;

export function makeNumberRounder({
  mode,
  precision,
}: Required<Omit<CleanOptions<RoundNumberParserOptions>, 'applyToKeys'>>): NumberRounder {
  const roundFn = mode === 'auto' ? Math.round : mode == 'up' ? Math.ceil : Math.floor;

  const factor = Math.pow(10, precision);

  return (number: number) => roundFn(number * factor) / factor;
}
