<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-robotic-nervous-system/ch03-ros2-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions | Physical AI and Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions | Physical AI and Humanoid Robotics"><meta data-rh="true" name="description" content="Date: December 15, 2025"><meta data-rh="true" property="og:description" content="Date: December 15, 2025"><link data-rh="true" rel="icon" href="/Physical_AI_and_Humanoid_Robotics_Book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture"><link data-rh="true" rel="alternate" href="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions","item":"https://Sabahat029.github.io/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture"}]}</script><link rel="alternate" type="application/rss+xml" href="/Physical_AI_and_Humanoid_Robotics_Book/blog/rss.xml" title="Physical AI and Humanoid Robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Physical_AI_and_Humanoid_Robotics_Book/blog/atom.xml" title="Physical AI and Humanoid Robotics Atom Feed"><link rel="stylesheet" href="/Physical_AI_and_Humanoid_Robotics_Book/assets/css/styles.761b036b.css">
<script src="/Physical_AI_and_Humanoid_Robotics_Book/assets/js/runtime~main.fcee6aeb.js" defer="defer"></script>
<script src="/Physical_AI_and_Humanoid_Robotics_Book/assets/js/main.f21e0e13.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Physical_AI_and_Humanoid_Robotics_Book/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Physical_AI_and_Humanoid_Robotics_Book/"><div class="navbar__logo"><img src="/Physical_AI_and_Humanoid_Robotics_Book/img/logo.svg" alt="Book Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Physical_AI_and_Humanoid_Robotics_Book/img/logo.svg" alt="Book Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI Book</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/introduction/ch01-physical-ai-foundations">Book</a><a class="navbar__item navbar__link" href="/Physical_AI_and_Humanoid_Robotics_Book/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Sabahat029/Physical_AI_and_Humanoid_Robotics_Book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/introduction/ch01-physical-ai-foundations"><span title="introduction" class="categoryLinkLabel_W154">introduction</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/introduction/authoritative-sources"><span title="introduction" class="categoryLinkLabel_W154">introduction</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/intro"><span title="Tutorial Intro" class="linkLabel_WmDU">Tutorial Intro</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture"><span title="robotic-nervous-system" class="categoryLinkLabel_W154">robotic-nervous-system</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch03-ros2-architecture"><span title="Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions" class="linkLabel_WmDU">Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch04-python-agents-ros"><span title="Chapter 4: Python Agents → ROS 2 Controllers (rclpy)" class="linkLabel_WmDU">Chapter 4: Python Agents → ROS 2 Controllers (rclpy)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch05-urdf-humanoid-description"><span title="Chapter 5: URDF for Humanoid Description" class="linkLabel_WmDU">Chapter 5: URDF for Humanoid Description</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/chapter-4-6-key-points"><span title="robotic-nervous-system" class="categoryLinkLabel_W154">robotic-nervous-system</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/digital-twin-environments/ch06-gazebo-simulation-setup"><span title="digital-twin-environments" class="categoryLinkLabel_W154">digital-twin-environments</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/digital-twin/chapter-7-10-key-points"><span title="digital-twin" class="categoryLinkLabel_W154">digital-twin</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/vision-language-action/ch10-voice-to-action-integration"><span title="vision-language-action" class="categoryLinkLabel_W154">vision-language-action</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/GEMINI"><span title="Gemini CLI Rules" class="linkLabel_WmDU">Gemini CLI Rules</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical_AI_and_Humanoid_Robotics_Book/docs"><span title="Website" class="linkLabel_WmDU">Website</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/appendix/agent-architecture-diagrams"><span title="appendix" class="categoryLinkLabel_W154">appendix</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/research-organization"><span title="Research Organization by Chapter &amp; Section" class="linkLabel_WmDU">Research Organization by Chapter &amp; Section</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Physical_AI_and_Humanoid_Robotics_Book/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">robotic-nervous-system</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 3: ROS 2 Architecture - Nodes, Topics, Services, Actions</h1></header>
<p><strong>Date</strong>: December 15, 2025<br>
<strong>Module</strong>: Robotic Nervous System (ROS 2)<br>
<strong>Chapter</strong>: 3 of 12<br>
<strong>Estimated Reading Time</strong>: 150 minutes<br>
<strong>Prerequisites</strong>: Basic Python knowledge, Ubuntu/Linux familiarity, understanding of distributed systems concepts</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">​</a></h2>
<p>By the end of this chapter, you will be able to:</p>
<ol>
<li class="">Master ROS 2 computational graph concepts and architecture principles</li>
<li class="">Design and implement nodes, publishers, subscribers for robotic systems</li>
<li class="">Create services and actions for goal-oriented robot communication</li>
<li class="">Understand and configure Quality of Service (QoS) settings for different use cases</li>
<li class="">Configure launch files and parameter management systems</li>
<li class="">Implement robust communication patterns for real-time robotic applications</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="31-introduction-to-ros-2-architecture-and-computational-graph">3.1 Introduction to ROS 2 Architecture and Computational Graph<a href="#31-introduction-to-ros-2-architecture-and-computational-graph" class="hash-link" aria-label="Direct link to 3.1 Introduction to ROS 2 Architecture and Computational Graph" title="Direct link to 3.1 Introduction to ROS 2 Architecture and Computational Graph" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-ros-2-computational-graph">The ROS 2 Computational Graph<a href="#the-ros-2-computational-graph" class="hash-link" aria-label="Direct link to The ROS 2 Computational Graph" title="Direct link to The ROS 2 Computational Graph" translate="no">​</a></h3>
<p>ROS 2 (Robot Operating System 2) represents a fundamental architecture for developing and deploying robotic systems. Unlike traditional monolithic software approaches, ROS 2 employs a distributed computational graph architecture where different software components (nodes) communicate through a message-passing system. This architecture enables the development of complex robotic systems by allowing different functionality to be encapsulated in separate, communicating nodes.</p>
<p>The computational graph in ROS 2 consists of nodes that perform computation and communicate with each other through messages. These nodes can run on the same machine or distributed across multiple machines, allowing for flexible system design. The communication between nodes is managed by the ROS 2 middleware, which handles message routing, discovery, and delivery.</p>
<p>This distributed architecture is particularly well-suited to Physical AI systems, where different types of information processing (perception, planning, control, etc.) can be encapsulated in separate nodes that communicate efficiently. The modular design allows for system components to be developed, tested, and maintained independently, while the communication system ensures that information flows appropriately between components.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-architectural-concepts">Key Architectural Concepts<a href="#key-architectural-concepts" class="hash-link" aria-label="Direct link to Key Architectural Concepts" title="Direct link to Key Architectural Concepts" translate="no">​</a></h3>
<p>The ROS 2 architectural model is built around several key concepts that enable its distributed nature. <strong>Nodes</strong> are the fundamental computational units that perform specific functions and communicate with other nodes. <strong>Messages</strong> are the data structures that carry information between nodes. <strong>Topics</strong> are named buses over which messages are published and subscribed. <strong>Services</strong> provide synchronous request-response communication, while <strong>Actions</strong> provide asynchronous goal-oriented communication.</p>
<p>The ROS 2 architecture also includes <strong>Parameters</strong> for configuration, <strong>Actions</strong> for long-running tasks with feedback, and <strong>Launch files</strong> for starting groups of nodes with specific configurations. These architectural elements work together to provide a flexible and powerful framework for developing robotic systems.</p>
<p>The design of ROS 2 addresses several limitations of the original ROS system, particularly around real-time performance, security, and deployment in production environments. The DDS (Data Distribution Service) middleware provides the foundation for reliable communication, while the client library implementations (rclcpp for C++ and rclpy for Python) provide the interface between application code and the middleware.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="advantages-for-physical-ai-systems">Advantages for Physical AI Systems<a href="#advantages-for-physical-ai-systems" class="hash-link" aria-label="Direct link to Advantages for Physical AI Systems" title="Direct link to Advantages for Physical AI Systems" translate="no">​</a></h3>
<p>ROS 2&#x27;s architectural design provides several advantages for Physical AI systems. The distributed nature aligns well with the modular sensorimotor processing required by embodied systems. Different sensors can be encapsulated in separate nodes, with their data processed by specialized algorithms that then publish their results to other nodes for integration and decision making.</p>
<p>The real-time performance characteristics of ROS 2 are important for Physical AI systems that require responsive interaction with the environment. The quality of service settings allow for different communication patterns depending on the criticality of the information being communicated. Time-critical control information can be prioritized over less urgent status information.</p>
<p>The modularity of ROS 2 also supports the development of reusable components that can be shared across different Physical AI applications. A perception node developed for one robot can potentially be used with minor modifications on another robot, accelerating development and allowing researchers to build on each other&#x27;s work.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="middleware-and-client-library-architecture">Middleware and Client Library Architecture<a href="#middleware-and-client-library-architecture" class="hash-link" aria-label="Direct link to Middleware and Client Library Architecture" title="Direct link to Middleware and Client Library Architecture" translate="no">​</a></h3>
<p>ROS 2&#x27;s architecture is built on top of DDS middleware, which provides the underlying communication infrastructure. DDS (Data Distribution Service) is an industry-standard middleware specification that provides publish-subscribe communication patterns with rich quality of service capabilities. This middleware choice provides ROS 2 with enterprise-level performance and reliability.</p>
<p>The ROS 2 architecture includes multiple client libraries that provide language-specific interfaces to the underlying middleware. The most commonly used client libraries are rclcpp for C++ and rclpy for Python, but other languages are supported as well. These client libraries provide the interface between application code and the middleware, handling the complexities of message serialization, network communication, and service discovery.</p>
<p>The layered architecture of ROS 2 separates the application interface (client libraries) from the middleware implementation, allowing for flexibility in middleware selection. This design also allows for the middleware to be updated or replaced while maintaining application compatibility, which is important for long-term system maintenance.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="32-nodes-the-fundamental-computational-units">3.2 Nodes: The Fundamental Computational Units<a href="#32-nodes-the-fundamental-computational-units" class="hash-link" aria-label="Direct link to 3.2 Nodes: The Fundamental Computational Units" title="Direct link to 3.2 Nodes: The Fundamental Computational Units" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-ros-2-nodes">Understanding ROS 2 Nodes<a href="#understanding-ros-2-nodes" class="hash-link" aria-label="Direct link to Understanding ROS 2 Nodes" title="Direct link to Understanding ROS 2 Nodes" translate="no">​</a></h3>
<p>A node in ROS 2 is an executable that uses ROS 2 client libraries to communicate with other nodes. Nodes are the fundamental computational units that perform specific functions within a robotic system. Each node typically encapsulates a single functionality, such as sensor data processing, control algorithm implementation, or user interface management.</p>
<p>Nodes in ROS 2 are designed to be lightweight and focused on a single responsibility, following the Unix philosophy of doing one thing well. This design allows for complex systems to be built by connecting multiple simple nodes, each performing its specific function. The communication between nodes is handled by the ROS 2 middleware, allowing nodes to be developed and tested independently.</p>
<p>The lifecycle of a ROS 2 node is managed by the client library, which handles node initialization, parameter management, and cleanup. Nodes can be created with specific names, namespaces, and parameters, allowing for flexible system configuration. The node interface provides methods for creating publishers, subscribers, services, and other communication endpoints.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-implementation-patterns">Node Implementation Patterns<a href="#node-implementation-patterns" class="hash-link" aria-label="Direct link to Node Implementation Patterns" title="Direct link to Node Implementation Patterns" translate="no">​</a></h3>
<p>Implementing ROS 2 nodes requires understanding several design patterns that enable effective communication and coordination. The <strong>publisher-subscriber pattern</strong> is the most common, where nodes publish data to topics and other nodes subscribe to receive this data. This asynchronous communication pattern is well-suited to real-time sensorimotor processing where data is continuously generated and processed.</p>
<p>The <strong>client-server pattern</strong> is implemented through ROS 2 services, where one node provides a service and other nodes request specific operations from that service. This synchronous communication pattern is useful for operations that require a specific response, such as requesting specific robot configurations or triggering specific actions.</p>
<p>The <strong>action pattern</strong> provides asynchronous goal-oriented communication with feedback and status updates. This pattern is useful for long-running operations where the requester needs to know the progress and final result of the operation, such as navigation goals or manipulation tasks.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-lifecycle-management">Node Lifecycle Management<a href="#node-lifecycle-management" class="hash-link" aria-label="Direct link to Node Lifecycle Management" title="Direct link to Node Lifecycle Management" translate="no">​</a></h3>
<p>ROS 2 includes sophisticated lifecycle management capabilities that allow nodes to transition between different states in a controlled manner. The lifecycle states include Unconfigured, Inactive, Active, and Finalized, with well-defined transitions between states. This management system allows for controlled system startup, reconfiguration, and shutdown.</p>
<p>Lifecycle nodes provide several advantages for complex robotic systems. The state-based approach allows for proper initialization of complex systems where some nodes must be initialized before others. The reconfiguration capabilities allow nodes to change their behavior at runtime based on changing operational requirements.</p>
<p>The lifecycle management system also supports fault tolerance by allowing individual nodes to be restarted while the rest of the system continues operating. This capability is important for long-running physical AI systems that must maintain operation even when individual components experience problems.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-nodes-with-rclpy">Creating Nodes with rclpy<a href="#creating-nodes-with-rclpy" class="hash-link" aria-label="Direct link to Creating Nodes with rclpy" title="Direct link to Creating Nodes with rclpy" translate="no">​</a></h3>
<p>The rclpy client library provides Python interfaces for creating ROS 2 nodes. Creating a basic node involves importing the rclpy library, creating a Node subclass, and implementing the required functionality. The rclpy library handles the underlying communication and middleware interaction, allowing developers to focus on application-specific logic.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BasicNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;basic_node&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Node initialized&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This simple example demonstrates the basic structure of a ROS 2 node. The node inherits from the Node class provided by rclpy, calls the parent constructor with a node name, and can then create publishers, subscribers, and other communication endpoints.</p>
<p>More complex nodes will typically include publishers, subscribers, timers, and other communication endpoints. The node&#x27;s constructor will create these elements, and the node will implement callbacks to handle incoming messages and timer events. The node may also include service servers, action servers, and parameter management.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-best-practices">Node Best Practices<a href="#node-best-practices" class="hash-link" aria-label="Direct link to Node Best Practices" title="Direct link to Node Best Practices" translate="no">​</a></h3>
<p>Effective node design follows several best practices that improve system reliability and maintainability. Nodes should have a single, well-defined responsibility and should avoid complex internal state management when possible. This design makes nodes easier to test and more reliable.</p>
<p>Nodes should handle errors gracefully and provide appropriate logging for debugging and monitoring. The ROS 2 logging system provides different log levels and allows for structured logging that supports monitoring and analysis of system behavior.</p>
<p>Nodes should also be designed with configuration in mind. Parameters should be used for configuration values that may change between different deployments or operational modes. This allows nodes to be reused in different contexts with minimal code changes.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="33-topic-based-communication-publishers-and-subscribers">3.3 Topic-Based Communication: Publishers and Subscribers<a href="#33-topic-based-communication-publishers-and-subscribers" class="hash-link" aria-label="Direct link to 3.3 Topic-Based Communication: Publishers and Subscribers" title="Direct link to 3.3 Topic-Based Communication: Publishers and Subscribers" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-publish-subscribe-pattern-in-ros-2">The Publish-Subscribe Pattern in ROS 2<a href="#the-publish-subscribe-pattern-in-ros-2" class="hash-link" aria-label="Direct link to The Publish-Subscribe Pattern in ROS 2" title="Direct link to The Publish-Subscribe Pattern in ROS 2" translate="no">​</a></h3>
<p>The publish-subscribe communication pattern is the backbone of ROS 2&#x27;s asynchronous communication system. In this pattern, nodes called <strong>publishers</strong> send messages to named <strong>topics</strong>, while nodes called <strong>subscribers</strong> receive messages from topics. This one-to-many communication pattern allows for flexible data distribution where multiple subscribers can receive the same data stream without the publisher needing to know about all subscribers.</p>
<p>The publish-subscribe pattern is particularly well-suited to sensorimotor processing in Physical AI systems. Sensor nodes can continuously publish sensor data without concern for which other nodes are using the data. Multiple processing nodes can subscribe to the same sensor data, each performing different types of processing. This loose coupling between publishers and subscribers enables flexible system design.</p>
<p>The topic-based communication system in ROS 2 provides several advantages for robotic systems. It enables real-time data distribution with predictable performance characteristics. The asynchronous nature of the communication means that slow consumers don&#x27;t block fast producers, which is important for maintaining system responsiveness in real-time robotic applications.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementation-of-publishers-and-subscribers">Implementation of Publishers and Subscribers<a href="#implementation-of-publishers-and-subscribers" class="hash-link" aria-label="Direct link to Implementation of Publishers and Subscribers" title="Direct link to Implementation of Publishers and Subscribers" translate="no">​</a></h3>
<p>Creating a publisher in ROS 2 involves creating a publisher object within a node, specifying the topic name and message type. The publisher can then send messages by calling its publish method with a message object. The message object must be of the specified type and properly initialized with the data to be sent.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PublisherNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;publisher_node&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;topic&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        timer_period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_timer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer_period</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timer_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">timer_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Hello World: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Publishing: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre></div></div>
<p>This example demonstrates a simple publisher that sends a string message periodically. The publisher is created with a topic name (&#x27;topic&#x27;), a message type (String), and a queue size (10). The timer callback constructs a message, populates it with data, and publishes it to the topic.</p>
<p>Creating a subscriber is similarly straightforward. The subscriber is created with a topic name, message type, and callback function. When messages are received on the topic, the callback function is invoked with the received message.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SubscriberNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;subscriber_node&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_subscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;topic&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listener_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription  </span><span class="token comment" style="color:#999988;font-style:italic"># prevent unused variable warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">listener_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;I heard: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This subscriber example shows how to create a subscription and process incoming messages. The create_subscription method specifies the topic name, message type, callback function, and queue size. The callback function receives the message object and can process its contents.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="message-types-and-serialization">Message Types and Serialization<a href="#message-types-and-serialization" class="hash-link" aria-label="Direct link to Message Types and Serialization" title="Direct link to Message Types and Serialization" translate="no">​</a></h3>
<p>ROS 2 provides a rich set of standard message types for common robotic applications, including sensor_msgs for sensor data, geometry_msgs for geometric information, and nav_msgs for navigation. These standard message types enable interoperability between different robotic systems and allow developers to focus on functionality rather than message format design.</p>
<p>For custom applications, developers can define their own message types using the ROS 2 message definition language (msg files). These custom message types can include primitive types like integers and floats, as well as arrays and nested message types. The ROS 2 build system automatically generates client library code for custom message types, making them easy to use in applications.</p>
<p>Message serialization and deserialization is handled automatically by the ROS 2 client libraries. When a message is published, the client library serializes it into a binary format for transmission. When a message is received, it is automatically deserialized into the appropriate message type for the application to use.</p>
<p>The serialization system supports both CDR (Common Data Representation) and other formats, ensuring compatibility across different platforms and programming languages. The serialization is efficient to minimize network bandwidth and processing time, which is important for real-time robotic applications.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="quality-of-service-in-topic-communication">Quality of Service in Topic Communication<a href="#quality-of-service-in-topic-communication" class="hash-link" aria-label="Direct link to Quality of Service in Topic Communication" title="Direct link to Quality of Service in Topic Communication" translate="no">​</a></h3>
<p>Quality of Service (QoS) settings allow developers to specify the behavior and reliability characteristics of topic-based communication. These settings control aspects such as reliability, durability, liveliness, and history, allowing different topics to be configured for their specific requirements.</p>
<p>The reliability QoS setting determines whether message delivery is best-effort or reliable. Best-effort delivery prioritizes low latency over message delivery, which is appropriate for sensor data where older messages become irrelevant quickly. Reliable delivery ensures that all messages are delivered, which is important for control commands where no messages can be lost.</p>
<p>The history QoS setting controls how many messages are stored for late-joining subscribers. Keep-all history stores all messages, which is useful for configuration parameters that must be available to all nodes. Keep-last history stores only the most recent messages, which is appropriate for streaming sensor data where only recent values are relevant.</p>
<p>The durability QoS setting determines whether messages are stored for nodes that were not active when the messages were sent. Transient-local durability stores messages in a special storage that late-joining nodes can access, which is useful for initial configuration information. Volatile durability does not store messages for late joiners, which is appropriate for streaming data.</p>
<p>These QoS settings are crucial for Physical AI systems where different types of information have different requirements. Sensor data may require best-effort delivery to maintain real-time performance, while configuration data may require reliable delivery to ensure consistent system behavior.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="34-service-based-communication-request-response-patterns">3.4 Service-Based Communication: Request-Response Patterns<a href="#34-service-based-communication-request-response-patterns" class="hash-link" aria-label="Direct link to 3.4 Service-Based Communication: Request-Response Patterns" title="Direct link to 3.4 Service-Based Communication: Request-Response Patterns" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-services-in-ros-2">Understanding Services in ROS 2<a href="#understanding-services-in-ros-2" class="hash-link" aria-label="Direct link to Understanding Services in ROS 2" title="Direct link to Understanding Services in ROS 2" translate="no">​</a></h3>
<p>Services in ROS 2 provide synchronous request-response communication between nodes, filling the gap left by the asynchronous nature of topic-based communication. A service node provides a specific function that can be requested by other nodes, responding with the result of the requested operation. This pattern is essential for operations that require immediate responses or for operations that change the state of the system.</p>
<p>The service pattern is implemented using service definition files that specify the request and response message types. When a client node wants to use a service, it sends a request message to the service server, which processes the request and returns a response message. The communication is synchronous from the client&#x27;s perspective, meaning the client waits for the response before continuing execution.</p>
<p>Services are appropriate for operations that are relatively fast and have well-defined inputs and outputs. Examples include requesting robot configuration parameters, triggering specific calibration procedures, or requesting the robot to move to a specific position. The synchronous nature ensures that the client knows immediately whether the operation succeeded and what the result was.</p>
<p>However, services are not appropriate for long-running operations or operations that require ongoing feedback. For these cases, ROS 2 provides actions, which will be discussed later in this chapter. The service pattern is designed for operations that complete relatively quickly and return a single result.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-definition-and-implementation">Service Definition and Implementation<a href="#service-definition-and-implementation" class="hash-link" aria-label="Direct link to Service Definition and Implementation" title="Direct link to Service Definition and Implementation" translate="no">​</a></h3>
<p>Creating a service in ROS 2 involves defining the service interface using the service definition language (srv files). A service definition includes two parts: the request message format and the response message format. The request format defines what information the client must provide to the service, while the response format defines what information the service will return.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Example service definition (example_service.srv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string name      # Request: name to look up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int64 age       # Response: age if found, -1 if not found</span><br></span></code></pre></div></div>
<p>This example service definition specifies that the service expects a string request (a name) and will return an integer response (an age). The service definition is placed in an srv directory within a ROS 2 package and is used to automatically generate the client and server code for the service.</p>
<p>Service servers are implemented within nodes and handle incoming service requests. The server must implement a callback function that processes the request and returns the appropriate response. The callback function receives the request message and must return a response message.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">srv </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AddTwoInts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MinimalService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;minimal_service&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">srv </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AddTwoInts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;add_two_ints&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_two_ints_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_two_ints_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Returning </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">request</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">a</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> + </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">request</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">b</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> = </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">response</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation builtin">sum</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> response</span><br></span></code></pre></div></div>
<p>This example shows a simple service server that adds two integers. The service is created with the service type, service name (&#x27;add_two_ints&#x27;), and callback function. The callback processes the request (adding the two integers) and sets the response value.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-clients-and-usage-patterns">Service Clients and Usage Patterns<a href="#service-clients-and-usage-patterns" class="hash-link" aria-label="Direct link to Service Clients and Usage Patterns" title="Direct link to Service Clients and Usage Patterns" translate="no">​</a></h3>
<p>Service clients make requests to service servers and wait for the responses. Creating a service client involves creating a client object within a node, specifying the service type and name. The client can then make requests using the service call interface.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">srv </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AddTwoInts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MinimalClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;minimal_client&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cli </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AddTwoInts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;add_two_ints&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cli</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wait_for_service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeout_sec</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Service not available, waiting again...&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">req </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AddTwoInts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">future </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cli</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">call_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spin_until_future_complete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">future</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This client example shows how to create a service client and make service requests. The client waits for the service to become available, creates a request object, and then makes the service call asynchronously. The spin_until_future_complete function waits for the response.</p>
<p>Service clients should handle the possibility that service calls may fail due to network issues, server unavailability, or other problems. The service call interface provides mechanisms for handling these failures gracefully, including timeout mechanisms and error reporting.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-design-considerations">Service Design Considerations<a href="#service-design-considerations" class="hash-link" aria-label="Direct link to Service Design Considerations" title="Direct link to Service Design Considerations" translate="no">​</a></h3>
<p>Effective service design requires careful consideration of the service interface and behavior. Services should have well-defined, specific functions rather than being general-purpose. A service that &quot;does everything&quot; is difficult to implement reliably and maintain over time. Instead, multiple specific services should be created for different functions.</p>
<p>Services should also be designed to avoid blocking other system operations. If a service call takes too long to complete, it can block the calling thread and potentially affect other system functionality. Long-running operations should be implemented as actions rather than services.</p>
<p>The request and response message design should be clear and efficient. Avoid overly complex message structures that are difficult to implement and maintain. The service interface should be stable over time to maintain compatibility with existing clients.</p>
<p>Security considerations are also important for services, particularly when robots operate in networked environments. Service interfaces should authenticate clients and validate requests to prevent unauthorized access or malformed data.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="35-action-based-communication-asynchronous-goal-oriented-systems">3.5 Action-Based Communication: Asynchronous Goal-Oriented Systems<a href="#35-action-based-communication-asynchronous-goal-oriented-systems" class="hash-link" aria-label="Direct link to 3.5 Action-Based Communication: Asynchronous Goal-Oriented Systems" title="Direct link to 3.5 Action-Based Communication: Asynchronous Goal-Oriented Systems" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-actions-in-ros-2">Understanding Actions in ROS 2<a href="#understanding-actions-in-ros-2" class="hash-link" aria-label="Direct link to Understanding Actions in ROS 2" title="Direct link to Understanding Actions in ROS 2" translate="no">​</a></h3>
<p>Actions in ROS 2 provide goal-oriented communication for long-running operations that require feedback and status updates. Unlike services, which provide synchronous request-response communication, and topics, which provide asynchronous data streaming, actions bridge these approaches by providing asynchronous operations with ongoing feedback and status information.</p>
<p>An action consists of three message types: goal, feedback, and result. The goal defines what the client wants the action server to do. The feedback provides ongoing status information during the action execution. The result provides the final outcome when the action completes. This three-part structure enables rich interaction patterns where clients can monitor progress and potentially cancel long-running operations.</p>
<p>Actions are essential for Physical AI systems where many operations take significant time to complete. Examples include navigation to distant locations, complex manipulation tasks, or data collection over extended periods. The ability to monitor progress and potentially interrupt these operations is crucial for responsive robotic systems.</p>
<p>The action pattern also supports multiple active goals simultaneously. A single action server can be managing multiple goals from different clients, each in different stages of execution. This capability enables more sophisticated multi-tasking behavior in robotic systems.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="action-definition-and-implementation">Action Definition and Implementation<a href="#action-definition-and-implementation" class="hash-link" aria-label="Direct link to Action Definition and Implementation" title="Direct link to Action Definition and Implementation" translate="no">​</a></h3>
<p>Action definitions use a special action definition language (action files) that specify the three message types required for actions. The action definition includes goal, result, and feedback message formats in a single file with the .action extension.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Example action definition (Fibonacci.action)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int32 order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int32[] sequence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int32[] partial_sequence</span><br></span></code></pre></div></div>
<p>This example action definition creates a Fibonacci sequence generator. The goal includes the order of the sequence to generate, the result includes the complete sequence, and the feedback includes partial results as the sequence is computed.</p>
<p>Action servers implement the action interface within nodes and handle goal requests, feedback updates, and result reporting. The action server must implement callbacks for goal acceptance, goal execution, and cancellation handling.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">action </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ActionServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> GoalResponse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CancelResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callback_groups </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ReentrantCallbackGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">executors </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MultiThreadedExecutor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">action </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Fibonacci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FibonacciActionServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fibonacci_action_server&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_action_server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ActionServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Fibonacci</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;fibonacci&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            execute_callback</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            callback_group</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReentrantCallbackGroup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            goal_callback</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goal_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cancel_callback</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cancel_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">goal_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> goal_request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Received goal request&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> GoalResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cancel_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Received cancel request&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> CancelResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">execute_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Executing goal...&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        feedback_msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fibonacci</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Feedback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        feedback_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">is_cancel_requested</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">canceled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Goal canceled&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Fibonacci</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            feedback_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                feedback_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> feedback_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish_feedback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">feedback_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Simulate processing time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">succeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fibonacci</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> feedback_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Returning result: {0}&#x27;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> result</span><br></span></code></pre></div></div>
<p>This example shows a complete action server implementation. The server handles goal requests, cancellation requests, and executes the action while providing feedback. The asynchronous nature allows for proper handling of cancellation and progress updates.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="action-clients-and-interaction-patterns">Action Clients and Interaction Patterns<a href="#action-clients-and-interaction-patterns" class="hash-link" aria-label="Direct link to Action Clients and Interaction Patterns" title="Direct link to Action Clients and Interaction Patterns" translate="no">​</a></h3>
<p>Action clients interact with action servers by sending goals, receiving feedback, and retrieving results. Unlike service clients, action clients don&#x27;t wait for immediate responses but instead maintain ongoing communication with the action server throughout the operation.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">action </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ActionClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">action </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Fibonacci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FibonacciActionClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fibonacci_action_client&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_action_client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ActionClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Fibonacci</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fibonacci&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_goal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        goal_msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fibonacci</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Goal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        goal_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_action_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wait_for_server</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_send_goal_future </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_action_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send_goal_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            goal_msg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            feedback_callback</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">feedback_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_send_goal_future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_done_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goal_response_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">goal_response_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        goal_handle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accepted</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Goal rejected&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Goal accepted&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_get_result_future </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> goal_handle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_result_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_get_result_future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_done_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_result_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">feedback_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> feedback_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Received feedback: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">feedback_msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">feedback</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">partial_sequence</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_result_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Result: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">sequence</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This client example shows how to create an action client that sends goals, receives feedback, and retrieves the final result. The client must handle the asynchronous nature of action communication, with callbacks for different stages of the interaction.</p>
<p>Action clients should be designed to handle cancellation gracefully and to monitor action progress appropriately. The feedback mechanism allows clients to provide user interface updates and to make decisions about continuing or canceling the action based on the progress information.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-action-concepts">Advanced Action Concepts<a href="#advanced-action-concepts" class="hash-link" aria-label="Direct link to Advanced Action Concepts" title="Direct link to Advanced Action Concepts" translate="no">​</a></h3>
<p>Actions support several advanced features that enable sophisticated robotic applications. Goal preemption allows action servers to abort current goals when new goals are received. This is useful for operations where newer goals supersede older ones, such as navigation where a new destination should replace an in-progress navigation.</p>
<p>Result timeouts provide mechanisms for handling action servers that don&#x27;t respond appropriately. Clients can specify timeouts for receiving results, and the action system will handle the timeout appropriately. This prevents clients from waiting indefinitely for actions that don&#x27;t complete properly.</p>
<p>Goal and result persistence allow action servers to continue managing goals and results even across system restarts. This capability is important for long-running operations that might span system maintenance or restarts.</p>
<p>The action interface also supports streaming feedback for very long-running operations. Instead of sending feedback as a single message, servers can stream feedback messages throughout the operation, providing continuous updates on system status.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="36-quality-of-service-qos-settings-and-real-time-considerations">3.6 Quality of Service (QoS) Settings and Real-Time Considerations<a href="#36-quality-of-service-qos-settings-and-real-time-considerations" class="hash-link" aria-label="Direct link to 3.6 Quality of Service (QoS) Settings and Real-Time Considerations" title="Direct link to 3.6 Quality of Service (QoS) Settings and Real-Time Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-quality-of-service-in-ros-2">Understanding Quality of Service in ROS 2<a href="#understanding-quality-of-service-in-ros-2" class="hash-link" aria-label="Direct link to Understanding Quality of Service in ROS 2" title="Direct link to Understanding Quality of Service in ROS 2" translate="no">​</a></h3>
<p>Quality of Service (QoS) settings in ROS 2 provide mechanisms for controlling the behavior and reliability characteristics of message communication. These settings allow different aspects of communication to be tailored to specific application requirements, enabling ROS 2 systems to meet diverse performance and reliability needs.</p>
<p>QoS settings are particularly important for Physical AI systems where different types of data have different requirements. Control commands may require reliable delivery to ensure safe operation, while sensor data might prioritize low latency over delivery guarantee. The QoS system allows these different requirements to be specified and enforced.</p>
<p>The QoS system in ROS 2 is based on DDS (Data Distribution Service) specifications, providing industry-standard mechanisms for quality of service control. This provides ROS 2 with sophisticated capabilities for managing distributed real-time communication while maintaining compatibility with broader DDS ecosystems.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reliability-settings-and-applications">Reliability Settings and Applications<a href="#reliability-settings-and-applications" class="hash-link" aria-label="Direct link to Reliability Settings and Applications" title="Direct link to Reliability Settings and Applications" translate="no">​</a></h3>
<p>The reliability QoS setting controls whether message delivery must be guaranteed or if best-effort delivery is acceptable. <strong>Reliable</strong> delivery ensures that all messages are delivered to subscribers, potentially retransmitting lost messages. <strong>Best effort</strong> delivery attempts to deliver messages but does not guarantee delivery, prioritizing low latency over reliability.</p>
<p>For Physical AI systems, the choice of reliability setting depends on the specific data being transmitted. Control commands and configuration parameters typically require reliable delivery to ensure that critical information is not lost. A navigation command telling a robot to stop must be delivered reliably to prevent safety issues.</p>
<p>Conversely, sensor data often uses best-effort delivery. In a video stream, if a frame is lost, the next frame will arrive soon and provides the most current information. Receiving an old frame late is typically less useful than receiving the current frame quickly.</p>
<p>The reliability setting also affects system performance and resource usage. Reliable delivery requires additional network overhead and processing to track delivery status and potentially retransmit messages. Best-effort delivery has lower overhead but with the corresponding risk of lost messages.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="durability-and-history-policies">Durability and History Policies<a href="#durability-and-history-policies" class="hash-link" aria-label="Direct link to Durability and History Policies" title="Direct link to Durability and History Policies" translate="no">​</a></h3>
<p>Durability settings determine how messages are handled for late-joining subscribers. <strong>Volatile</strong> durability means that only messages published after a subscriber joins are available to that subscriber. <strong>Transient local</strong> durability stores messages in a special storage that late-joining subscribers can access to get initial state information.</p>
<p>History policies control how many messages are stored for delivery. <strong>Keep last</strong> stores only the specified number of most recent messages. <strong>Keep all</strong> stores all messages published on the topic. These settings interact with durability settings to control message availability and memory usage.</p>
<p>For static configuration information, transient local durability with keep-all history might be appropriate to ensure that new nodes can receive all configuration data. For streaming sensor data, volatile durability with keep-last history is often more appropriate to limit memory usage while providing recent data to late joiners.</p>
<p>The choice of durability and history settings affects both memory usage and startup behavior. Systems with many topics using keep-all history can consume significant memory, while systems with volatile durability may require special handling for nodes that start after configuration data has been published.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deadline-and-lifeliness-qos-settings">Deadline and Lifeliness QoS Settings<a href="#deadline-and-lifeliness-qos-settings" class="hash-link" aria-label="Direct link to Deadline and Lifeliness QoS Settings" title="Direct link to Deadline and Lifeliness QoS Settings" translate="no">​</a></h3>
<p>Deadline settings specify the maximum time interval between consecutive messages on a topic. This setting is important for monitoring systems to detect when data sources stop publishing as expected. If no messages are received within the deadline period, monitoring systems can take appropriate action.</p>
<p>Liveliness settings provide mechanisms for detecting when publishers or subscribers become unavailable. This is important for safety-critical Physical AI systems where the absence of critical data sources should trigger appropriate responses.</p>
<p>The deadline and liveliness settings work together to provide robustness to system failures. A navigation system might use deadlines to detect when a critical sensor stops providing data, and liveliness settings to detect when the sensor node itself becomes unavailable.</p>
<p>These settings are particularly important for Physical AI systems operating in complex environments where individual sensors or processing nodes might temporarily become unavailable due to environmental conditions or mechanical issues.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-time-performance-considerations">Real-Time Performance Considerations<a href="#real-time-performance-considerations" class="hash-link" aria-label="Direct link to Real-Time Performance Considerations" title="Direct link to Real-Time Performance Considerations" translate="no">​</a></h3>
<p>Real-time ROS 2 systems require careful attention to timing and performance characteristics. The QoS settings provide mechanisms for optimizing performance for real-time applications, but they must be chosen appropriately for the specific real-time requirements.</p>
<p>Message queue sizes affect the buffering of messages and can impact real-time performance. Large queues can absorb bursts of messages but may introduce latency. Small queues reduce latency but may result in message loss during bursts. The appropriate queue size depends on the expected message rates and burst characteristics.</p>
<p>The choice of middleware implementation can also affect real-time performance. Different DDS implementations have different performance characteristics, and some are better suited to real-time applications than others. The middleware choice may need to be optimized for specific real-time requirements.</p>
<p>Task scheduling and thread management within ROS 2 nodes also affect real-time performance. Nodes should be designed to avoid blocking operations on critical timing paths and to ensure that high-priority communication is not blocked by lower-priority processing.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="37-launch-files-and-parameter-management">3.7 Launch Files and Parameter Management<a href="#37-launch-files-and-parameter-management" class="hash-link" aria-label="Direct link to 3.7 Launch Files and Parameter Management" title="Direct link to 3.7 Launch Files and Parameter Management" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="launch-system-overview">Launch System Overview<a href="#launch-system-overview" class="hash-link" aria-label="Direct link to Launch System Overview" title="Direct link to Launch System Overview" translate="no">​</a></h3>
<p>The ROS 2 launch system provides mechanisms for starting and configuring groups of nodes as a coordinated system. Launch files specify which nodes to start, their parameters, and the relationships between them. This enables complex systems to be started with a single command and to be reconfigured using different launch files for different operational scenarios.</p>
<p>Launch files use XML or Python syntax to specify node configurations. The XML format provides a declarative approach that is easy to read and modify, while the Python format provides more flexibility for complex startup logic. Both formats support parameter specification, remapping of topics and services, and conditional startup based on runtime conditions.</p>
<p>The launch system also supports composition, where multiple nodes can be run within a single process to improve performance by eliminating inter-process communication overhead. This is particularly useful for nodes that communicate frequently with each other.</p>
<p>Launch files can include other launch files, enabling modular system design where common components are defined in shared files and specific configurations are defined in application-specific files. This modularity supports reuse of common components across different applications.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="parameter-management-in-ros-2">Parameter Management in ROS 2<a href="#parameter-management-in-ros-2" class="hash-link" aria-label="Direct link to Parameter Management in ROS 2" title="Direct link to Parameter Management in ROS 2" translate="no">​</a></h3>
<p>Parameters in ROS 2 provide a mechanism for configuring node behavior without recompiling code. Parameters can be specified at launch time, set during runtime, and saved for future runs. This flexibility allows systems to be configured for different environments and operational requirements without changing code.</p>
<p>ROS 2 parameters support several data types including integers, floats, strings, booleans, and arrays of these types. Parameters can be declared within nodes with default values, descriptions, and constraints. This declaration system enables parameter validation and provides documentation for the available parameters.</p>
<p>Parameter files can store parameter configurations for reuse across different system deployments. These files can be written in YAML format and loaded at launch time, providing a convenient way to manage system configurations.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example parameter file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">publisher_node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ros__parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">publish_frequency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">message_prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre></div></div>
<p>This parameter file shows how parameters can be organized by node name, making it easy to manage parameter sets for complex systems with many nodes.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-launch-concepts">Advanced Launch Concepts<a href="#advanced-launch-concepts" class="hash-link" aria-label="Direct link to Advanced Launch Concepts" title="Direct link to Advanced Launch Concepts" translate="no">​</a></h3>
<p>ROS 2 launch files support several advanced features for complex system management. Conditional launching allows nodes to be started based on command-line arguments or other runtime conditions. This enables single launch files to support multiple operational modes.</p>
<p>Event handling in launch systems allows for sophisticated startup coordination. Nodes can be configured to start only after other nodes become available, or to restart automatically if they crash. This improves system reliability and reduces manual intervention requirements.</p>
<p>Remapping in launch files allows topic and service names to be changed without modifying the node code. This is useful for creating reusable nodes that can operate in different system contexts with different naming conventions.</p>
<p>Security policies can be specified in launch files to control access to system resources. This is important for Physical AI systems that may operate in networked environments where security is a concern.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices-for-launch-and-parameter-management">Best Practices for Launch and Parameter Management<a href="#best-practices-for-launch-and-parameter-management" class="hash-link" aria-label="Direct link to Best Practices for Launch and Parameter Management" title="Direct link to Best Practices for Launch and Parameter Management" translate="no">​</a></h3>
<p>Effective launch file management follows several best practices that improve system maintainability and reliability. Launch files should be organized hierarchically with common components in shared files and application-specific configurations in separate files.</p>
<p>Parameter naming should follow consistent conventions that make it clear which node a parameter applies to and what function it controls. This prevents naming conflicts and makes parameter configuration more intuitive.</p>
<p>Launch files should include error handling and validation to detect configuration problems during startup rather than during operation. This includes checking for required parameters and validating parameter ranges.</p>
<p>Parameters that control critical safety functions should be carefully managed with appropriate defaults and validation. These parameters may require special handling to prevent unsafe configurations.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>This chapter has provided a comprehensive exploration of the ROS 2 architecture that enables distributed sensorimotor processing essential for Physical AI systems:</p>
<ol>
<li class=""><strong>Computational graph fundamentals</strong>: Understanding nodes and distributed architecture</li>
<li class=""><strong>Topic-based communication</strong>: Publishers, subscribers, and asynchronous messaging</li>
<li class=""><strong>Service-based communication</strong>: Synchronous request-response patterns</li>
<li class=""><strong>Action-based communication</strong>: Asynchronous goal-oriented systems</li>
<li class=""><strong>Quality of Service settings</strong>: Performance and reliability optimization</li>
<li class=""><strong>Launch and parameter management</strong>: System configuration and deployment</li>
</ol>
<p>These architectural concepts provide the communication backbone that enables Physical AI systems to distribute processing across multiple nodes while maintaining the real-time performance required for embodied interaction. The modular design enables complex systems to be built from simple, focused components that communicate through standardized interfaces.</p>
<p>The key insight from this chapter is that ROS 2 architecture is specifically designed to support the distributed, real-time communication requirements of Physical AI systems. The different communication patterns (topics, services, actions) are appropriate for different types of sensorimotor processing, and the QoS system enables optimization for specific performance requirements.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-terms">Key Terms<a href="#key-terms" class="hash-link" aria-label="Direct link to Key Terms" title="Direct link to Key Terms" translate="no">​</a></h2>
<ul>
<li class=""><strong>Node</strong>: Fundamental computational unit in ROS 2 that communicates with other nodes</li>
<li class=""><strong>Topic</strong>: Named bus for asynchronous message publication and subscription</li>
<li class=""><strong>Publisher</strong>: Node that sends messages on a topic</li>
<li class=""><strong>Subscriber</strong>: Node that receives messages from a topic</li>
<li class=""><strong>Service</strong>: Synchronous request-response communication pattern</li>
<li class=""><strong>Action</strong>: Asynchronous goal-oriented communication with feedback</li>
<li class=""><strong>Quality of Service (QoS)</strong>: Settings that control communication behavior and reliability</li>
<li class=""><strong>Launch File</strong>: Configuration file that specifies which nodes to start and how</li>
<li class=""><strong>Parameter</strong>: Configurable value that can be set without recompiling code</li>
<li class=""><strong>DDS (Data Distribution Service)</strong>: Middleware specification underlying ROS 2 communication</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading" translate="no">​</a></h2>
<ul>
<li class="">Quigley, M., Gerkey, B., &amp; Smart, W. D. (2019). &quot;Programming Robots with ROS: A Practical Introduction to the Robot Operating System.&quot; O&#x27;Reilly Media.</li>
<li class="">ROS 2 Documentation Consortium. (2025). &quot;ROS 2 Documentation.&quot; docs.ros.org</li>
<li class="">Mettler, B. (2021). &quot;ROS Robot Programming: Industrial and Educational Applications.&quot; Springer.</li>
<li class="">Macenski, S. (2022). &quot;ROS 2 with C++: A Practical Introduction.&quot;</li>
</ul>
<hr>
<p><strong>Chapter 4 Preview</strong>: In the next chapter, we will explore how to connect Python-based AI agents to ROS 2 controllers using the rclpy client library, implementing the distributed AI-robot interaction that represents the core of Physical AI systems. We will examine how to integrate AI decision-making with real-time robot control while maintaining the performance and reliability requirements of embodied systems.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tutorial Intro</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Physical_AI_and_Humanoid_Robotics_Book/docs/robotic-nervous-system/ch04-python-agents-ros"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 4: Python Agents → ROS 2 Controllers (rclpy)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#31-introduction-to-ros-2-architecture-and-computational-graph" class="table-of-contents__link toc-highlight">3.1 Introduction to ROS 2 Architecture and Computational Graph</a><ul><li><a href="#the-ros-2-computational-graph" class="table-of-contents__link toc-highlight">The ROS 2 Computational Graph</a></li><li><a href="#key-architectural-concepts" class="table-of-contents__link toc-highlight">Key Architectural Concepts</a></li><li><a href="#advantages-for-physical-ai-systems" class="table-of-contents__link toc-highlight">Advantages for Physical AI Systems</a></li><li><a href="#middleware-and-client-library-architecture" class="table-of-contents__link toc-highlight">Middleware and Client Library Architecture</a></li></ul></li><li><a href="#32-nodes-the-fundamental-computational-units" class="table-of-contents__link toc-highlight">3.2 Nodes: The Fundamental Computational Units</a><ul><li><a href="#understanding-ros-2-nodes" class="table-of-contents__link toc-highlight">Understanding ROS 2 Nodes</a></li><li><a href="#node-implementation-patterns" class="table-of-contents__link toc-highlight">Node Implementation Patterns</a></li><li><a href="#node-lifecycle-management" class="table-of-contents__link toc-highlight">Node Lifecycle Management</a></li><li><a href="#creating-nodes-with-rclpy" class="table-of-contents__link toc-highlight">Creating Nodes with rclpy</a></li><li><a href="#node-best-practices" class="table-of-contents__link toc-highlight">Node Best Practices</a></li></ul></li><li><a href="#33-topic-based-communication-publishers-and-subscribers" class="table-of-contents__link toc-highlight">3.3 Topic-Based Communication: Publishers and Subscribers</a><ul><li><a href="#the-publish-subscribe-pattern-in-ros-2" class="table-of-contents__link toc-highlight">The Publish-Subscribe Pattern in ROS 2</a></li><li><a href="#implementation-of-publishers-and-subscribers" class="table-of-contents__link toc-highlight">Implementation of Publishers and Subscribers</a></li><li><a href="#message-types-and-serialization" class="table-of-contents__link toc-highlight">Message Types and Serialization</a></li><li><a href="#quality-of-service-in-topic-communication" class="table-of-contents__link toc-highlight">Quality of Service in Topic Communication</a></li></ul></li><li><a href="#34-service-based-communication-request-response-patterns" class="table-of-contents__link toc-highlight">3.4 Service-Based Communication: Request-Response Patterns</a><ul><li><a href="#understanding-services-in-ros-2" class="table-of-contents__link toc-highlight">Understanding Services in ROS 2</a></li><li><a href="#service-definition-and-implementation" class="table-of-contents__link toc-highlight">Service Definition and Implementation</a></li><li><a href="#service-clients-and-usage-patterns" class="table-of-contents__link toc-highlight">Service Clients and Usage Patterns</a></li><li><a href="#service-design-considerations" class="table-of-contents__link toc-highlight">Service Design Considerations</a></li></ul></li><li><a href="#35-action-based-communication-asynchronous-goal-oriented-systems" class="table-of-contents__link toc-highlight">3.5 Action-Based Communication: Asynchronous Goal-Oriented Systems</a><ul><li><a href="#understanding-actions-in-ros-2" class="table-of-contents__link toc-highlight">Understanding Actions in ROS 2</a></li><li><a href="#action-definition-and-implementation" class="table-of-contents__link toc-highlight">Action Definition and Implementation</a></li><li><a href="#action-clients-and-interaction-patterns" class="table-of-contents__link toc-highlight">Action Clients and Interaction Patterns</a></li><li><a href="#advanced-action-concepts" class="table-of-contents__link toc-highlight">Advanced Action Concepts</a></li></ul></li><li><a href="#36-quality-of-service-qos-settings-and-real-time-considerations" class="table-of-contents__link toc-highlight">3.6 Quality of Service (QoS) Settings and Real-Time Considerations</a><ul><li><a href="#understanding-quality-of-service-in-ros-2" class="table-of-contents__link toc-highlight">Understanding Quality of Service in ROS 2</a></li><li><a href="#reliability-settings-and-applications" class="table-of-contents__link toc-highlight">Reliability Settings and Applications</a></li><li><a href="#durability-and-history-policies" class="table-of-contents__link toc-highlight">Durability and History Policies</a></li><li><a href="#deadline-and-lifeliness-qos-settings" class="table-of-contents__link toc-highlight">Deadline and Lifeliness QoS Settings</a></li><li><a href="#real-time-performance-considerations" class="table-of-contents__link toc-highlight">Real-Time Performance Considerations</a></li></ul></li><li><a href="#37-launch-files-and-parameter-management" class="table-of-contents__link toc-highlight">3.7 Launch Files and Parameter Management</a><ul><li><a href="#launch-system-overview" class="table-of-contents__link toc-highlight">Launch System Overview</a></li><li><a href="#parameter-management-in-ros-2" class="table-of-contents__link toc-highlight">Parameter Management in ROS 2</a></li><li><a href="#advanced-launch-concepts" class="table-of-contents__link toc-highlight">Advanced Launch Concepts</a></li><li><a href="#best-practices-for-launch-and-parameter-management" class="table-of-contents__link toc-highlight">Best Practices for Launch and Parameter Management</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#key-terms" class="table-of-contents__link toc-highlight">Key Terms</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Sabahat Aslam, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>